@page "/Administration/Grapes"

<MudCard>
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Typo="Typo.h6">Grapes</MudText>
        </CardHeaderContent>
        <CardHeaderActions>
            <MudFab StartIcon="@Icons.Material.Filled.Add" Color="Color.Primary" OnClick="AddGrape" Size="Size.Medium" />
        </CardHeaderActions>
    </MudCardHeader>
    <MudCardContent>
        @if (_grapes is not null)
        {
            <MudDataGrid T="GrapeDto"
                     Items="@_grapes"
                     SortMode="SortMode.Multiple"
                     QuickFilter="QuickFilter"
                     Hideable=true
                     Bordered=true>
                <ToolBarContent>
                    <MudText Typo="Typo.h6">Grapes</MudText>
                    <MudSpacer />
                    <MudTextField @bind-Value="_searchString"
                              Placeholder="Search"
                              Adornment="Adornment.Start"
                              Immediate="true"
                              AdornmentIcon="@Icons.Material.Filled.Search"
                              IconSize="Size.Medium"
                              Class="mt-0"></MudTextField>
                </ToolBarContent>
                <Columns>
                    <Column T="GrapeDto" Field="Id" Title="Id" Sortable="true" Filterable="false" IsEditable="false" />
                    <Column T="GrapeDto" Field="Name" Title="Name" Sortable="true" Filterable="true" />
                    <Column T="GrapeDto">
                        <CellTemplate>
                            @{
                                var grape = context.Item;
                            }
                            <MudIconButton Size="Size.Small" Icon="@Icons.Outlined.Edit" Color="Color.Primary" @onclick="() => OpenGrape(grape)" />
                            <MudIconButton Size="Size.Small" Icon="@Icons.Outlined.Delete" Color="Color.Error" @onclick="() => DeleteGrape(grape)" />
                        </CellTemplate>
                    </Column>
                </Columns>
                <PagerContent>
                    <MudDataGridPager T="GrapeDto" />
                </PagerContent>
            </MudDataGrid>
        }
    </MudCardContent>
</MudCard>
