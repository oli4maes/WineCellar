@using WineCellar.Blazor.Shared.Components.NavMenu
@inherits LayoutComponentBase

<MudThemeProvider @ref="@_mudThemeProvider" @bind-IsDarkMode="@_isDarkMode" Theme="_theme"/>
<MudDialogProvider
    FullWidth="true"
    MaxWidth="MaxWidth.Small"
    CloseButton="true"
    CloseOnEscapeKey="true"/>

<MudSnackbarProvider/>

<MudLayout>
    <AuthorizeView>
        <Authorized>
            <AppBar DrawerToggle="DrawerToggle"/>
            <MudDrawer @bind-Open="_drawerOpen" ClipMode="_clipMode" Elevation="1">
                <NavMenu/>
            </MudDrawer>
        </Authorized>
    </AuthorizeView>
    <MudMainContent>
        <AuthorizeView>
            <Authorized>
                @Body
            </Authorized>
            <NotAuthorized>
                <AppLanding/>
            </NotAuthorized>
        </AuthorizeView>
    </MudMainContent>
</MudLayout>